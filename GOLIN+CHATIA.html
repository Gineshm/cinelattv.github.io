<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ZUKIFLIX - Login con Google</title>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-900 text-white flex items-center justify-center min-h-screen">

  <div class="bg-gray-800 p-8 rounded-lg w-full max-w-sm shadow-lg">
    <h2 class="text-2xl font-bold mb-6 text-center">ZUKIFLIX - Inicia sesión</h2>

    <button onclick="loginConGoogle()" class="w-full bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded flex items-center justify-center space-x-2">
      <img src="https://www.svgrepo.com/show/475656/google-color.svg" class="w-5 h-5" alt="Google"/>
      <span>Iniciar con Google</span>
    </button>

    <div class="mt-6 text-center text-sm text-gray-400">
      <p>o usa tu correo electrónico</p>
    </div>

    <input id="email" type="email" placeholder="Correo" class="mt-4 w-full px-4 py-2 bg-gray-700 rounded text-white" />
    <input id="password" type="password" placeholder="Contraseña" class="mt-2 w-full px-4 py-2 bg-gray-700 rounded text-white" />

    <div class="flex space-x-2 mt-4">
      <button onclick="registrarse()" class="flex-1 bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded">Registrarse</button>
      <button onclick="iniciarSesion()" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded">Entrar</button>
    </div>

    <p id="mensaje" class="text-sm text-red-400 mt-4 text-center"></p>
  </div>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBytnjuanP1qnPnF-DMFbpwiSohyMCmG_s",
      authDomain: "chatflixpe.firebaseapp.com",
      projectId: "chatflixpe",
      storageBucket: "chatflixpe.appspot.com",
      messagingSenderId: "521464275482",
      appId: "1:521464275482:web:e628a82eabbbb25d2fa7a3",
      measurementId: "G-SRRFJP5EQW"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const provider = new firebase.auth.GoogleAuthProvider();

    // Inicio con redirección
    function loginConGoogle() {
      auth.signInWithRedirect(provider);
    }

    // Después del redireccionamiento
    auth.getRedirectResult()
      .then(result => {
        if (result.user) {
          document.getElementById('mensaje').textContent = `✅ Bienvenido, ${result.user.displayName}`;
        }
      })
      .catch(error => {
        document.getElementById('mensaje').textContent = `❌ ${error.message}`;
      });

    // Registro tradicional
    function registrarse() {
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      auth.createUserWithEmailAndPassword(email, password)
        .then(() => {
          document.getElementById('mensaje').textContent = "✅ Registro exitoso.";
        })
        .catch(error => {
          document.getElementById('mensaje').textContent = `❌ ${error.message}`;
        });
    }

    // Login tradicional
    function iniciarSesion() {
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      auth.signInWithEmailAndPassword(email, password)
        .then(userCredential => {
          document.getElementById('mensaje').textContent = `✅ Bienvenido, ${userCredential.user.email}`;
        })
        .catch(error => {
          document.getElementById('mensaje').textContent = `❌ ${error.message}`;
        });
    }
  </script>
</body>
</html>
